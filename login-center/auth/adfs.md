---
title: Active Directory Federation Server (ADFS)
description: Настройка входа в логин центр через ADFS
published: false
date: 2023-12-01T05:33:14.152Z
tags: login center, sso, adfs, saml
editor: markdown
dateCreated: 2023-12-01T05:33:14.152Z
---

# Active Directory Federation Server (ADFS)
ADFS является одной из реализаций SSO на основе SAML. Для настройки входа через ADFS в логин центре требуется:
- добавить в adfs возможность авторизации в логин центре
- настроить в логин центре авторизацию через adfs 
- настроить url для входа 
- задать предпочтительный способ входа в логин центре

## Настройка сервера ADFS

Для настройки нам понадобятся метаданные узла. Для их получения идем в логин центр. Раздел `System` и нажимаем на кнопку `Generate SAML SP Metadata`
![adfs-1.png](/login-center/auth/adfs-1.png)

После этого или скачается или откроется в браузере файл `metadata.xml`. Нам нужно или передать этот файл на сервер adfs или ссылка на этот файл. Как правила это `https://адрес_логин_центра/saml/metadata.xml`

На сервере с установленной ролью adfs идем в раздел `Отношения доверия проверяющей стороны` жмем на нем правой кнопкой и в выпадающем меню выбираем `Добавить отношение доверия проверяющей стороны`

В мастере добавления отношения выбираем Поддерживающие утверждения и ниже переходим к запустить

![adfs-2.png](/login-center/auth/adfs-2.png)

На следующем шаге или указываем ссылку до метаданных логин центра или через пункт два выбираем загруженный xml файл после чего нажимаем далее

![adfs-3.png](/login-center/auth/adfs-3.png)

При необходимости заполняем отображаемые данные и примечания

![adfs-4.png](/login-center/auth/adfs-4.png)

Задаем политику доступа для пользователей

![adfs-5.png](/login-center/auth/adfs-5.png)

Можем просмотреть данные для добавляемого отношения полученные на предидущих шагах 

![adfs-6.png](/login-center/auth/adfs-6.png)

И по нажатии далее будет создано отношения доверия с логин центром. 

После этого переходим к настройке политик подачи запросов. Для этого нажимаем правой кнопкой на созданное отношение доверия и в контекстном меню выбираем `Изменить политику подачи запросов`








